/**!
 * FlexSearch.js v0.7.22 (Light)
 * Copyright 2018-2021 Nextapps GmbH
 * Author: Thomas Wilkerling
 * Licence: Apache-2.0
 * https://github.com/nextapps-de/flexsearch
 */
(function(self){'use strict';function t(a){return"undefined"!==typeof a?a:!0}function v(a){const b=Array(a);for(let c=0;c<a;c++)b[c]=y();return b}function y(){return Object.create(null)}function z(a){return"object"===typeof a};const A=/[\p{Z}\p{S}\p{P}\p{C}]+/u;function B(a,b){const c=Object.keys(a),d=c.length,e=[];let f="",g=0;for(let h=0,k,m;h<d;h++)k=c[h],(m=a[k])?(e[g++]=new RegExp(b?"(?!\\b)"+k+"(\\b|_)":k,"g"),e[g++]=m):f+=(f?"|":"")+k;f&&(e[g++]=new RegExp(b?"(?!\\b)("+f+")(\\b|_)":"("+f+")","g"),e[g]="");return e}function C(a,b){for(let c=0,d=b.length;c<d&&(a=a.replace(b[c],b[c+1]),a);c+=2);return a};function D(a){if(a=(""+a).toLowerCase())if(this.u&&(a=C(a,this.u)),this.A&&1<a.length&&(a=C(a,this.A)),A||""===A)if(a=a.split(A),this.filter){var b=this.filter;const c=a.length,d=[];for(let e=0,f=0;e<c;e++){const g=a[e];g&&!b[g]&&(d[f++]=g)}a=d}return a};const E={},G={};function H(a,b,c,d){const e=a.length;let f=[],g,h,k=0;d&&(d=[]);for(let m=e-1;0<=m;m--){const q=a[m],r=q.length,p=y();let n=!g;for(let l=0;l<r;l++){const u=q[l],N=u.length;if(N)for(let F=0,x,w;F<N;F++)if(w=u[F],g){if(g[w]){if(!m)if(c)c--;else if(f[k++]=w,k===b)return f;if(m||d)p[w]=1;n=!0}if(d&&(h[w]=(x=h[w])?++x:x=1,x<e)){const O=d[x-2]||(d[x-2]=[]);O[O.length]=w}}else p[w]=1}if(d)g||(h=p);else if(!n)return[];g=p}if(d)for(let m=d.length-1,q,r;0<=m;m--){q=d[m];r=q.length;for(let p=0,n;p<r;p++)if(n=
q[p],!g[n]){if(c)c--;else if(f[k++]=n,k===b)return f;g[n]=1}}return f};function I(a,b){if(!(this instanceof I))return new I(a);let c;if(a){var d=a.charset;c=a.lang;"string"===typeof d&&(-1===d.indexOf(":")&&(d+=":default"),d=G[d]);"string"===typeof c&&(c=E[c])}else a={};let e,f,g=a.context||{};this.encode=a.encode||d&&d.encode||D;this.register=b||y();this.o=e=a.resolution||9;this.D=b=d&&d.D||a.tokenize||"strict";this.i="strict"===b&&g.depth;this.j=t(g.bidirectional);this.g=f=t(a.optimize);this.m=t(a.fastupdate);this.h=a.minlength||1;this.C=a.boost;this.map=f?v(e):y();
this.s=e=g.resolution||1;this.l=f?v(e):y();this.v=d&&d.v||a.rtl;this.u=(b=a.matcher||c&&c.u)&&B(b,!1);this.A=(b=a.stemmer||c&&c.A)&&B(b,!0);if(a=b=a.filter||c&&c.filter){a=b;d=y();for(let h=0,k=a.length;h<k;h++)d[a[h]]=1;a=d}this.filter=a}I.prototype.append=function(a,b){return this.add(a,b,!0)};
I.prototype.add=function(a,b,c,d){if(b&&(a||0===a)){if(!d&&!c&&this.register[a])return this.update(a,b);b=this.encode(b);if(d=b.length){const m=y(),q=y(),r=this.i,p=this.o;for(let n=0;n<d;n++){let l=b[this.v?d-1-n:n];var e=l.length;if(l&&e>=this.h&&(r||!q[l])){var f=J(p,d,n),g="";switch(this.D){case "full":if(3<e){for(f=0;f<e;f++)for(var h=e;h>f;h--)if(h-f>=this.h){var k=J(p,d,n,e,f);g=l.substring(f,h);K(this,q,g,k,a,c)}break}case "reverse":if(2<e){for(h=e-1;0<h;h--)g=l[h]+g,g.length>=this.h&&K(this,
q,g,J(p,d,n,e,h),a,c);g=""}case "forward":if(1<e){for(h=0;h<e;h++)g+=l[h],g.length>=this.h&&K(this,q,g,f,a,c);break}default:if(this.C&&(f=Math.min(f/this.C(b,l,n)|0,p-1)),K(this,q,l,f,a,c),r&&1<d&&n<d-1)for(e=y(),g=this.s,f=l,h=Math.min(r+1,d-n),e[f]=1,k=1;k<h;k++)if((l=b[this.v?d-1-n-k:n+k])&&l.length>=this.h&&!e[l]){e[l]=1;const u=this.j&&l>f;K(this,m,u?f:l,J(g+(d/2>g?0:1),d,n,h-1,k-1),a,c,u?l:f)}}}}this.m||(this.register[a]=1)}}return this};
function J(a,b,c,d,e){return c&&1<a?b+(d||0)<=a?c+(e||0):(a-1)/(b+(d||0))*(c+(e||0))+1|0:0}function K(a,b,c,d,e,f,g){let h=g?a.l:a.map;if(!b[c]||g&&!b[c][g])a.g&&(h=h[d]),g?(b=b[c]||(b[c]=y()),b[g]=1,h=h[g]||(h[g]=y())):b[c]=1,h=h[c]||(h[c]=[]),a.g||(h=h[d]||(h[d]=[])),f&&-1!==h.indexOf(e)||(h[h.length]=e,a.m&&(a=a.register[e]||(a.register[e]=[]),a[a.length]=h))}
function L(a,b,c){if("string"===typeof a&&"number"===typeof b&&0<b&&z(c)&&c.constructor!==Array)return{query:a||c.query,G:b,offset:c.offset||0,context:c.context,B:!1};throw Error("Incorrect parameter types");}function M(a,b,c){b=a.encode(b);let d=b.length;if(1<d){const e=y(),f=[];for(let g=0,h=0,k;g<d;g++)if((k=b[g])&&k.length>=a.h&&!e[k])if(a.g||c||a.map[k])f[h++]=k,e[k]=1;else return;return f}return b}function P(a){return{context:a.context,B:!1,offset:a.context||0,F:a.query}}
I.prototype.search=function(a,b,c){let d=[];a&&b&&"number"===typeof b&&c&&z(c)?d.push(L(a,b,c)):a&&b&&z(b)&&!c?(c=b,b=c.limit||100,d.push(L(a,b,c))):a&&z(a)&&a.constructor!==Array&&!b&&!c?(c=a,b=c.limit||100,d.push(a)):!a||a.constructor!==Array||b||c||(c={},b=100,d=a);let e=[],f=d.length,{context:g,B:h,offset:k}=P(c);if(1<f){d=M(this,d,h);if(!d)return e;f=d.length}if(0==f)return e;c=this.i&&1<f&&!1!==g;let m=0,q;c?(q=a[0],m=1):1<f&&d.sort((r,p)=>p.query.length-r.query.length);for(;m<f;m++){let {B:r,
offset:p,F:n}=P(d[m]);b=d[m].limit||b||100;c?(a=Q(this,e,r,b,p,2===f,n,q),r&&!1===a&&e.length||(q=n)):a=Q(this,e,r,b,p,1===f,n);if(a)return a;if(r&&m===f-1){a=e.length;if(!a){if(c){c=0;m=-1;continue}return e}if(1===a)return R(e[0],b,p)}}return H(e,b,k,h)};
function Q(a,b,c,d,e,f,g,h){let k=[],m=h?a.l:a.map;a.g||(m=S(m,g,h,a.j));if(m){let q=0;const r=Math.min(m.length,h?a.s:a.o);for(let p=0,n=0,l,u;p<r;p++)if(l=m[p])if(a.g&&(l=S(l,g,h,a.j)),e&&l&&f&&(u=l.length,u<=e?(e-=u,l=null):(l=l.slice(e),e=0)),l&&(k[q++]=l,f&&(n+=l.length,n>=d)))break;if(q){if(f)return R(k,d,0);b[b.length]=k;return}}return!c&&k}function R(a,b,c){a=1===a.length?a[0]:[].concat.apply([],a);return c||a.length>b?a.slice(c,c+b):a}
function S(a,b,c,d){c?(d=d&&b>c,a=(a=a[d?b:c])&&a[d?c:b]):a=a[b];return a}I.prototype.contain=function(a){return!!this.register[a]};I.prototype.update=function(a,b){return this.remove(a).add(a,b)};I.prototype.remove=function(a,b){const c=this.register[a];if(c){if(this.m)for(let d=0,e;d<c.length;d++)e=c[d],e.splice(e.indexOf(a),1);else T(this.map,a,this.o,this.g),this.i&&T(this.l,a,this.s,this.g);b||delete this.register[a]}return this};
function T(a,b,c,d,e){let f=0;if(a.constructor===Array)if(e)b=a.indexOf(b),-1!==b?1<a.length&&(a.splice(b,1),f++):f++;else{e=Math.min(a.length,c);for(let g=0,h;g<e;g++)if(h=a[g])f=T(h,b,c,d,e),d||f||delete a[g]}else for(let g in a)(f=T(a[g],b,c,d,e))||delete a[g];return f};const U=self;let V;const W={Index:I,Document:null,Worker:null,registerCharset:function(a,b){G[a]=b},registerLanguage:function(a,b){E[a]=b}};(V=U.define)&&V.amd?V([],function(){return W}):U.exports?U.exports=W:U.FlexSearch=W;}(this));
